---
phase: 01-brand-voice-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - scripts/package.json
  - scripts/brand-voice.js
autonomous: true
requirements:
  - BRAND-01
  - BRAND-02
  - BRAND-03
  - BRAND-04
  - BRAND-05

must_haves:
  truths:
    - "require('./brand-voice') returns the BRAND identity object with company name, voice guidelines, and service descriptions"
    - "getUrgencyBlock() returns one of 6 different urgency message variations on successive calls"
    - "getRandomFAQs() returns FAQ entries framed around 'hire AI developer' search intent"
    - "getRandomCTA() returns a call-to-action block with parkktech.com/contact URL and action verb"
    - "No exported content contains the phrase 'AI writes our code'"
    - "npm install in scripts/ installs @anthropic-ai/sdk, puppeteer, and form-data without errors"
  artifacts:
    - path: "scripts/brand-voice.js"
      provides: "Brand identity module with BRAND object and content generation functions"
      exports: ["BRAND", "getUrgencyBlock", "getRandomFAQs", "getRandomCTA"]
    - path: "scripts/package.json"
      provides: "Pipeline dependency manifest"
      contains: "@anthropic-ai/sdk"
  key_links:
    - from: "scripts/brand-voice.js"
      to: "module.exports"
      via: "CommonJS named exports"
      pattern: "module\\.exports\\s*=\\s*\\{\\s*BRAND"
    - from: "scripts/brand-voice.js"
      to: "URGENCY_BLOCKS array"
      via: "module-level counter rotation"
      pattern: "urgencyIndex.*%.*URGENCY_BLOCKS\\.length"
---

<objective>
Create the shared brand voice module and pipeline dependency manifest for Parkk Technology's automated content pipeline.

Purpose: Both generators (blog post in Phase 2, thought leadership in Phase 3) import this module for consistent brand identity, voice guidelines, urgency messaging, FAQ templates, and CTAs. This is the foundation every content output depends on.

Output: Two files — `scripts/brand-voice.js` (CommonJS module) and `scripts/package.json` (dependency manifest) — verified against all 5 BRAND requirements.
</objective>

<execution_context>
@/home/jratz/.claude/get-shit-done/workflows/execute-plan.md
@/home/jratz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-brand-voice-foundation/1-CONTEXT.md
@.planning/phases/01-brand-voice-foundation/1-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create scripts/package.json and install pipeline dependencies</name>
  <files>scripts/package.json</files>
  <action>
Create the `scripts/` directory and `scripts/package.json` with the following exact content:

```json
{
  "name": "parkk-blog-pipeline",
  "version": "1.0.0",
  "description": "Automated blog post and thought leadership pipeline — Parkk Technology",
  "private": true,
  "engines": {
    "node": ">=22"
  },
  "dependencies": {
    "@anthropic-ai/sdk": "^0.78.0",
    "form-data": "^4.0.0",
    "puppeteer": "^24.0.0"
  }
}
```

Key requirements:
- All three dependencies MUST be in `dependencies` (not `devDependencies`): `@anthropic-ai/sdk`, `form-data`, `puppeteer`
- `"private": true` prevents accidental npm publish
- `"engines"` set to Node.js 22+ per project stack
- Do NOT add `"type": "module"` — the pipeline uses CommonJS

After creating the file, run `cd scripts && npm install` to install dependencies and generate `package-lock.json`. Puppeteer will download Chromium (~170MB) — this is expected and required for Phase 2 screenshot capture.
  </action>
  <verify>
    <automated>cd scripts && node -e "require('@anthropic-ai/sdk'); require('form-data'); require('puppeteer'); console.log('All 3 dependencies installed successfully')"</automated>
    <manual>Confirm scripts/package.json exists with all 3 dependencies listed</manual>
  </verify>
  <done>scripts/package.json exists with @anthropic-ai/sdk, form-data, and puppeteer as dependencies; npm install completes without errors; all three modules can be required</done>
</task>

<task type="auto">
  <name>Task 2: Create scripts/brand-voice.js with complete brand module</name>
  <files>scripts/brand-voice.js</files>
  <action>
Create `scripts/brand-voice.js` as a CommonJS module (`module.exports = { ... }`) with these exports:

**1. BRAND object (BRAND-01):**
- `name`: 'Parkk Technology'
- `author`: 'Jason Park'
- `authorTitle`: 'Jason Park, founder of Parkk Technology'
- `contact`: 'https://parkktech.com/contact'
- `voiceRules`: Array of 5 rules per CONTEXT.md locked decisions:
  - Never say "AI writes our code" — frame as results-driven
  - Lead with outcomes, not technology stacks
  - Confident builder tone: direct, no fluff
  - Urgency is firm factual nudge, never salesy pressure
  - Show what got built, not how it was built
- `services`: Array of 3 service objects (name + tagline each):
  - Custom Software Development
  - AI Integration for Existing Businesses
  - Equity Partnership ("we build for equity — no cash down")

**2. getUrgencyBlock() function (BRAND-02):**
- Returns one urgency block from a pool of exactly 6
- Uses module-level counter (`let urgencyIndex = 0`) that increments on each call
- Wraps via modulo: `URGENCY_BLOCKS[urgencyIndex % URGENCY_BLOCKS.length]`
- NOT time-based (time-based returns same value for successive calls in same second — fails success criterion)
- 6 angle categories per CONTEXT.md: competitive-pressure, speed-to-market, cost-of-waiting, talent-scarcity, first-mover, market-timing
- Each block is an object with `angle` (string) and `text` (string) fields
- Tone: firm nudge with factual competitive pressure, NOT salesy. Example style: "Companies investing in AI now are pulling ahead" — NOT "Every week you wait, your competitors ship AI features"

**3. getRandomFAQs(count) function (BRAND-03):**
- Pool of exactly 9 FAQ templates
- Each template: `{ question, answerScaffold, searchIntent }` where searchIntent is 'hire-ai-developer' or 'ai-business-education'
- `count` parameter is optional — defaults to returning all 9 templates (shuffled)
- Shuffle via `[...FAQ_TEMPLATES].sort(() => Math.random() - 0.5)` then slice
- Must cover both search intents per CONTEXT.md: "hire AI developer" (lead-gen) and "how can AI help my business" (educational)
- FAQ questions from CONTEXT.md specifics: "how much does it cost to hire an AI developer", "what does an AI development company do", "should I hire AI developers or build in-house" — plus 6 more covering both intents
- Answer scaffolds written in business decision-maker language, plain outcomes over technology

**4. getRandomCTA() function (BRAND-04):**
- Pool of at least 4 CTA blocks
- Each CTA: `{ heading, body, url, action }` where url is always 'https://parkktech.com/contact'
- `action` field contains a clear action verb phrase (e.g., "Get your free consultation")
- Tone: urgency-driven per CONTEXT.md — "Don't wait — get a free consultation today"
- Randomly selected via `Math.floor(Math.random() * CTA_POOL.length)`

**5. BRAND-05 framing rule enforcement:**
- The literal phrase "AI writes our code" MUST NOT appear ANYWHERE in the file — not in urgency blocks, FAQ templates, CTAs, or comments used as content
- Do not use contrast framing that includes the phrase (e.g., "Unlike companies where AI writes our code...")
- Frame positively: lead with what Parkk does (results-driven, outcomes), not what it avoids

**Content from Research:**
Use the content provided in 1-RESEARCH.md Code Examples section as the implementation reference. The research contains complete, verified urgency blocks, FAQ templates, and CTA pool entries that satisfy all locked decisions.

**Module format:**
- File starts with `'use strict';`
- Use `const` for data arrays, `let` for the urgency counter
- End with `module.exports = { BRAND, getUrgencyBlock, getRandomFAQs, getRandomCTA };`
  </action>
  <verify>
    <automated>cd scripts && node -e "const b = require('./brand-voice'); console.log('BRAND:', typeof b.BRAND === 'object'); console.log('getUrgencyBlock:', typeof b.getUrgencyBlock === 'function'); console.log('getRandomFAQs:', typeof b.getRandomFAQs === 'function'); console.log('getRandomCTA:', typeof b.getRandomCTA === 'function'); const s = new Set(); for(let i=0;i<6;i++) s.add(JSON.stringify(b.getUrgencyBlock())); console.log('6 distinct urgency blocks:', s.size === 6); const faqs = b.getRandomFAQs(); console.log('9 FAQ templates:', faqs.length === 9); const cta = b.getRandomCTA(); console.log('CTA has contact URL:', cta.url.includes('parkktech.com/contact')); const all = JSON.stringify(b); console.log('No prohibited phrase:', !all.includes('AI writes our code')); if(s.size !== 6 || faqs.length !== 9 || !cta.url.includes('parkktech.com/contact') || all.includes('AI writes our code')) process.exit(1);"</automated>
  </verify>
  <done>scripts/brand-voice.js exports BRAND object with identity/voice/services, getUrgencyBlock() cycles through 6 distinct blocks on successive calls, getRandomFAQs() returns 9 templates covering both search intents, getRandomCTA() returns CTA with parkktech.com/contact URL, and no content contains "AI writes our code"</done>
</task>

<task type="auto">
  <name>Task 3: Run full verification against Phase 1 success criteria</name>
  <files>scripts/brand-voice.js</files>
  <action>
Run a comprehensive verification script that tests all 5 Phase 1 success criteria from the ROADMAP:

1. `require('./brand-voice')` returns BRAND object with company name, voice guidelines, service descriptions
2. `getUrgencyBlock()` returns 6 different variations on successive calls
3. `getRandomFAQs()` returns FAQ entries framed around "hire AI developer" intent
4. `getRandomCTA()` returns CTA block; no returned content contains "AI writes our code"
5. `npm install` installs all pipeline dependencies

Create and run a verification script at `scripts/verify-brand.js`:

```javascript
'use strict';
const { BRAND, getUrgencyBlock, getRandomFAQs, getRandomCTA } = require('./brand-voice');
let failures = 0;

function assert(condition, msg) {
  if (!condition) { console.error('FAIL:', msg); failures++; }
  else { console.log('PASS:', msg); }
}

// SC1: BRAND identity object
assert(BRAND.name === 'Parkk Technology', 'BRAND.name is Parkk Technology');
assert(typeof BRAND.author === 'string' && BRAND.author.length > 0, 'BRAND.author is non-empty string');
assert(Array.isArray(BRAND.voiceRules) && BRAND.voiceRules.length >= 3, 'BRAND.voiceRules has voice guidelines');
assert(Array.isArray(BRAND.services) && BRAND.services.length >= 3, 'BRAND.services has service descriptions');
assert(BRAND.services.every(s => s.name && s.tagline), 'Each service has name and tagline');

// SC2: 6 different urgency blocks on successive calls
const urgencySet = new Set();
for (let i = 0; i < 6; i++) urgencySet.add(JSON.stringify(getUrgencyBlock()));
assert(urgencySet.size === 6, 'getUrgencyBlock() returns 6 distinct values on 6 successive calls');

// SC3: FAQs framed for hire-ai-developer intent
const faqs = getRandomFAQs();
assert(faqs.length === 9, 'getRandomFAQs() returns 9 templates');
const hireIntentFaqs = faqs.filter(f => f.searchIntent === 'hire-ai-developer');
assert(hireIntentFaqs.length >= 3, 'At least 3 FAQs target hire-ai-developer intent');
assert(faqs.every(f => f.question && f.answerScaffold), 'All FAQs have question and answerScaffold');

// SC4: CTA with contact URL, no prohibited phrase
const cta = getRandomCTA();
assert(cta.url.includes('parkktech.com/contact'), 'CTA includes parkktech.com/contact URL');
assert(typeof cta.action === 'string' && cta.action.length > 0, 'CTA has action verb text');
const allContent = JSON.stringify({ BRAND, urgency: Array.from({length: 6}, () => getUrgencyBlock()), faqs: getRandomFAQs(), cta: getRandomCTA() });
assert(!allContent.includes('AI writes our code'), 'No content contains prohibited phrase "AI writes our code"');

// SC5: Dependencies installed
try { require('@anthropic-ai/sdk'); assert(true, '@anthropic-ai/sdk installed'); } catch { assert(false, '@anthropic-ai/sdk installed'); }
try { require('puppeteer'); assert(true, 'puppeteer installed'); } catch { assert(false, 'puppeteer installed'); }
try { require('form-data'); assert(true, 'form-data installed'); } catch { assert(false, 'form-data installed'); }

console.log(`\n${failures === 0 ? 'ALL CHECKS PASSED' : failures + ' FAILURE(S)'}`);
process.exit(failures > 0 ? 1 : 0);
```

Run: `cd scripts && node verify-brand.js`

If any check fails, fix the issue in brand-voice.js and re-run until all pass. Delete the verification script after success (it served its purpose; the automated verify commands on Tasks 1 and 2 are the persistent checks).

Actually — keep verify-brand.js in the repo. It is useful as a smoke test for future changes to brand-voice.js.
  </action>
  <verify>
    <automated>cd scripts && node verify-brand.js</automated>
  </verify>
  <done>All Phase 1 success criteria pass: BRAND object exports identity, 6 urgency blocks cycle on successive calls, 9 FAQs cover hire-ai-developer intent, CTA includes contact URL, no prohibited phrase appears, and all 3 pipeline dependencies are installed</done>
</task>

</tasks>

<verification>
Run the full verification against ROADMAP Phase 1 success criteria:

1. `cd scripts && node -e "const b = require('./brand-voice'); console.log(b.BRAND.name)"` — prints "Parkk Technology"
2. `cd scripts && node -e "const b = require('./brand-voice'); const s = new Set(); for(let i=0;i<6;i++) s.add(b.getUrgencyBlock().angle); console.log(s.size)"` — prints "6"
3. `cd scripts && node -e "const b = require('./brand-voice'); console.log(b.getRandomFAQs().filter(f => f.searchIntent === 'hire-ai-developer').length)"` — prints 5 (or at least 3+)
4. `cd scripts && node -e "const b = require('./brand-voice'); const c = b.getRandomCTA(); console.log(c.url, !JSON.stringify(b).includes('AI writes our code'))"` — prints URL and "true"
5. `cd scripts && node -e "require('@anthropic-ai/sdk'); require('puppeteer'); require('form-data'); console.log('deps OK')"` — prints "deps OK"
</verification>

<success_criteria>
- scripts/brand-voice.js exists and exports { BRAND, getUrgencyBlock, getRandomFAQs, getRandomCTA }
- scripts/package.json exists with @anthropic-ai/sdk, form-data, puppeteer as dependencies
- npm install completes without errors in scripts/
- verify-brand.js passes all checks with exit code 0
- No content anywhere in brand-voice.js contains the literal phrase "AI writes our code"
</success_criteria>

<output>
After completion, create `.planning/phases/01-brand-voice-foundation/01-01-SUMMARY.md`
</output>
